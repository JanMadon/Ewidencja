import{T as L,e as h,k as A,o as a,f as B,w as c,b as t,a as x,c as r,F as g,r as y,t as e,h as i,i as w,d as D,l as M,u as v,O as b,n as N}from"./app-ce342ae0.js";import{_ as O}from"./SecondaryButton-a32aaaa8.js";import{_ as P}from"./Modal-56038277.js";import{_ as T}from"./AuthenticatedLayout-5e82fb2a.js";import{P as $}from"./PrimaryButton-d9c0da88.js";import{_ as E}from"./ChangeMonth-4829d30e.js";import"./ApplicationLogo-eac321ad.js";import"./_plugin-vue_export-helper-c27b6911.js";const V=t("h1",{class:"font-semibold text-2xl text-gray-800 leading-tight"},"User logs",-1),S={class:"flex items-center justify-between p-1 bm-3"},q=t("p",null,"...",-1),F={class:"flex-1 overflow-auto"},U={key:0,class:"text-center pt-10"},z={key:1,class:"min-w-full w-[900]"},I=t("thead",{class:"bg-gray-200 border-b"},[t("tr",null,[t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," LP. "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Date "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Enter "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Exit "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Logs "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Working time "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Premia ")])],-1),W={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},G={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},H={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},K=["onClick"],Q={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},X=t("td",{class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"}," + ",-1),Y=t("div",{class:"py-8 text-center text-sm text-gray-400"},[t("br")],-1),Z={ref:"loadMoreIntersect"},tt={class:"p-6"},et={class:"text-lg font-medium text-gray-900"},st={class:"flex justify-evenly mb-4"},ot={class:"text-center p-2"},at={class:"p-2"},nt={class:"text-center p-2"},lt={class:"p-2"},rt={class:"flex justify-between"},it={class:"ml-20 text-center w-[100]"},dt=t("thead",{class:"bg-gray-200 border-b"},[t("tr",null,[t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," LP. "),t("th",{class:"text-sm font-medium text-gray-900 px-6 py-4 text-left"}," Time record ")])],-1),ct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},mt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ut=t("label",{for:"appt"},"New record:",-1),pt=["formDate"],xt={class:"mt-6 flex justify-end mt-20"},jt={__name:"Logs",props:{id:Number,recordAdded:String,daysData:Object},setup(m){const d=m,u=L({newRecord:null}),f=h(!1),o=h({});A(()=>d.recordAdded,R);function k(n){this.dayData=n,f.value=!0}function _(){o.value={},f.value=!1}function j(n){b.put(route("my.addLogRequest"),{newRecord:n+" "+u.newRecord}),u.newRecord=null,_()}const C=n=>{b.post(route("my.logs.period"),{id:d.id,date:n})};function R(){d.recordAdded&&(alert("Rekord "+d.recordAdded+" has been sent for admin approval"),location.reload(!0),d.recordAdded="")}return(n,p)=>(a(),B(T,null,{header:c(()=>[V]),default:c(()=>[t("nav",S,[t("p",null,[x(E,{onPeriod:C})]),q]),t("div",F,[Object.keys(m.daysData).length?(a(),r("table",z,[I,t("tbody",null,[(a(!0),r(g,null,y(m.daysData,(s,l)=>(a(),r("tr",{key:l,class:"bg-white border-b"},[t("td",W,e(Object.keys(m.daysData).indexOf(l)+1),1),t("td",G,e(l),1),t("td",H,e(s.logs[0]),1),t("td",J,e(s.logs[s.logs.length-1]),1),t("td",{onClick:ft=>k([l,s]),class:N(["px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 transition duration-300 ease-in-out hover:bg-blue-100 cursor-pointer text-center",{"bg-red-200":s.logs.length%2}])},e(s.logs.length)+" "+e(s.logs.length%2?"(error)":""),11,K),t("td",Q,e(s.work_time),1),X]))),128))])])):(a(),r("p",U,"The database does not contain any records.")),Y,t("div",Z,null,512)]),x(P,{show:f.value},{default:c(()=>[t("div",tt,[t("h2",et," Date: "+e(o.value[0]),1),t("div",st,[t("div",null,[t("div",ot,[i("Enter: "),t("strong",null,e(o.value[1].logs[0]),1)]),t("div",at,[i("Exit: "),t("strong",null,e(o.value[1].logs[o.value[1].logs.length-1]),1)])]),t("div",null,[t("div",nt,[i("Time at work: "),t("strong",null,e(o.value[1].time),1)]),t("div",lt,[i("Break time: "),t("strong",null,e(o.value[1].break_time),1)])])]),t("div",rt,[t("table",it,[dt,t("tbody",null,[(a(!0),r(g,null,y(o.value[1].logs,(s,l)=>(a(),r("tr",null,[t("td",ct,e(l+1),1),t("td",mt,e(s),1)]))),256))])]),t("form",{onSubmit:p[1]||(p[1]=w(s=>j(o.value[0]),["prevent"])),class:"flex flex-col justify-end items-center"},[ut,D(t("input",{"onUpdate:modelValue":p[0]||(p[0]=s=>v(u).newRecord=s),formDate:o.value[0],type:"time",id:"appt",name:"appt",required:""},null,8,pt),[[M,v(u).newRecord]]),t("div",xt,[x(O,{onClick:w(_,["prevent"])},{default:c(()=>[i("Cancel")]),_:1}),x($,{class:"ms-3"},{default:c(()=>[i("Send request")]),_:1})])],32)])])]),_:1},8,["show"])]),_:1}))}};export{jt as default};
