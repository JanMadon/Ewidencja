import{e as i,k as B,o as c,f as $,w as h,b as e,a as w,t as r,i as x,h as p,c as u,g as C,d as v,l as g,m as L,F as j,r as E,v as S,O as V}from"./app-ce342ae0.js";import{_ as Y}from"./AuthenticatedLayout-5e82fb2a.js";import{P as q}from"./PrimaryButton-d9c0da88.js";import{_ as F}from"./SecondaryButton-a32aaaa8.js";import{D as z}from"./DangerButton-bc76201d.js";import{_ as G}from"./ChangeMonth-4829d30e.js";import"./ApplicationLogo-eac321ad.js";import"./_plugin-vue_export-helper-c27b6911.js";const J=e("h1",{class:"font-semibold text-2xl text-gray-800 leading-tight"},"Employees - Bill",-1),K={class:"flex items-center justify-between p-1 bm-3"},Q={class:"text-xl"},R={class:"text-xl"},W={class:"overflow-x-auto"},X={class:"max-w-xl mx-auto mt-10 p-6 bg-white rounded-md shadow-md overflow-x-auto"},Z={class:"text-2xl font-semibold mb-6"},ee={class:"text-xl font-semibold mb-6"},te={class:"min-w-full w-[900]"},se={class:"bg-gray-400 text-center border"},ae={colspan:"2",class:"text-l font-medium px-6 py-4 text-center border-2"},oe={key:0,class:"text-sm text-red-600"},le=e("td",{class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"}," Hours worked ",-1),ne={class:"text-center"},re={class:"bg-gray-200"},de=e("td",{class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"}," Double hours ",-1),ce={class:"text-center"},ie=e("td",{class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"}," Standard working time ",-1),ue={class:"w-full text-center"},me=["value"],pe=["value","innerHTML"],ve={key:0,value:"custom"},he={class:"bg-gray-200"},fe={class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"},ye=e("p",{class:"text-xs"},"valid from",-1),we={key:0,class:"text-center"},xe={key:1,class:"text-center"},_e={class:"text-xs"},be={class:"border"},ke=e("td",{class:"px-6 py-4 whitespace-nowrap font-medium text-gray-900"}," Net payment ",-1),ge={class:"text-center font-bold"},Te={__name:"UserBill",props:{id:String,user:Object,data:Object,newSalaryAdded:Boolean},setup(o){const H=i([144,152,160,168,176,184]),l=i(),_=i(""),N=i(!0),b=i(0),m=i(!1),f=i(0),y=i(""),a=o;function T(){m.value=!0}B(()=>[a.data.workTime,l.value,_.value],M),B(()=>a.newSalaryAdded,I);function A(){confirm(`Should I set a new salary ${f.value} PLN from ${y.value}?`)&&(V.put(route("user.bill.setSalary",[a.id]),{newSalry:f.value,validFrom:y.value}),console.log("ustaw nową stawkę")),f.value=0,y.value=0,m.value=!1}function I(){a.newSalaryAdded&&(alert("A new salary has been added."),location.reload(!0),a.recordAdded=!1)}function M(){if(a.data.workTime){const[d,t,s]=a.data.workTime.split(":"),O=parseInt(d)+parseInt(t)/60+parseInt(s)/3600+a.data.doubleHours;if(l.value==="custom"){const k=O/_.value;b.value=(a.data.salary*k).toFixed(2)}else{const k=O/l.value;b.value=(a.data.salary*k).toFixed(2)}}}function P(d){const t=d.slice(0,4),s=d.slice(5,7);let n=[];switch(t){case"2023":n=[168,160,184,152,168,168,168,176,168,176,160,152];break;case"2024":n=[168,168,168,168,160,160,184,168,168,184,152,160];break;case"2025":n=[168,160,168,168,160,160,184,160,176,184,144,168];break;case"2026":n=[160,160,176,168,160,168,184,160,176,176,160,168];break;default:n=[];break}n.length?l.value=n[s-1]:l.value="no data"}function U(){V.visit(route("user.logs",a.id))}const D=d=>{P(d),V.post(route("user.bill.period",a.id),{date:d})};return(d,t)=>(c(),$(Y,null,{header:h(()=>[J]),default:h(()=>[e("nav",K,[e("p",Q,[w(G,{onPeriod:D})]),e("p",R," User: "+r(o.user.name),1)]),e("div",W,[e("div",X,[e("h2",Z,"Employee: "+r(o.user.name),1),e("h4",ee,"Id: "+r(o.user.id),1),e("form",{onSubmit:t[5]||(t[5]=x(s=>d.submitForm(),["prevent"])),class:"flex flex-col"},[e("table",te,[e("thead",se,[e("tr",null,[e("th",ae,[p(" Monthly summary "),o.data.errors?(c(),u("p",oe,"User has "+r(o.data.errors)+" error(s) in the selected period",1)):C("",!0)])])]),e("tbody",null,[e("tr",null,[le,e("td",ne,r(o.data.workTime),1)]),e("tr",re,[de,e("td",ce,r(o.data.doubleHours),1)]),e("tr",null,[ie,e("td",ue,[l.value==="custom"?v((c(),u("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s),placeholder:"set value",class:"w-[30%] text-center"},null,512)),[[g,_.value]]):v((c(),u("select",{key:1,"onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s),id:"mySelector",class:"border-none cursor-pointer"},[(c(!0),u(j,null,E(H.value,(s,n)=>(c(),u("option",{key:n,value:s},r(s),9,me))),128)),e("option",{value:l.value,innerHTML:l.value},null,8,pe),N.value?(c(),u("option",ve,"set")):C("",!0)],512)),[[L,l.value]])])]),e("tr",he,[e("td",fe,[p(" Salary "),v(w(F,{onClick:x(T,["prevent"]),class:"scale-75"},{default:h(()=>[p(" set new ")]),_:1},512),[[S,!m.value]]),v(w(z,{onClick:t[2]||(t[2]=x(()=>m.value=!1,["prevent"])),class:"scale-90"},{default:h(()=>[p(" back ")]),_:1},512),[[S,m.value]]),v(w(q,{onClick:x(A,["prevent"]),class:"scale-90"},{default:h(()=>[p(" set ")]),_:1},512),[[S,m.value]]),ye]),m.value?(c(),u("td",we,[v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>f.value=s),type:"number",min:"0",placeholder:"set new salary",class:"w-[51%] text-center scale-90"},null,512),[[g,f.value]]),v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>y.value=s),type:"month",placeholder:"set month",class:"w-[51%] scale-90"},null,512),[[g,y.value]])])):(c(),u("td",xe,[p(r(o.data.salary)+" ",1),e("p",_e,r(o.data.salaryVaildFrom),1)]))]),e("tr",be,[ke,e("td",ge,r(b.value),1)])])]),e("div",null,[w(F,{onClick:x(U,["prevent"]),class:"mr-5 mt-5"},{default:h(()=>[p("return")]),_:1})])],32)])])]),_:1}))}};export{Te as default};
